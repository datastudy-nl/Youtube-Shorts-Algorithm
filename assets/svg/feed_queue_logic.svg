<?plantuml 1.2026.2beta3?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="550px" preserveAspectRatio="none" style="width:613px;height:550px;background:#FFFFFF;" version="1.1" viewBox="0 0 613 550" width="613px" zoomAndPan="magnify"><title>The Feed Queue Logic (Selection Probability)</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="560.957" x="30.1726" y="35.4209">The Feed Queue Logic (Selection Probability)</text><rect fill="#FFFFFF" height="143.5313" style="stroke:#000000;stroke-width:1;" width="271.582" x="335.7202" y="253.8359"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="User" id="part1-lifeline"><g><title>User Session</title><rect fill="#000000" fill-opacity="0.00000" height="431.8594" width="8" x="67.8882" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="71" x2="71" y1="82.9063" y2="514.7656"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Gen" id="part2-lifeline"><g><title>Candidate Generator</title><rect fill="#000000" fill-opacity="0.00000" height="431.8594" width="8" x="238.3198" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="241.7617" x2="241.7617" y1="82.9063" y2="514.7656"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Rank" id="part3-lifeline"><g><title>Ranking Engine</title><rect fill="#000000" fill-opacity="0.00000" height="431.8594" width="8" x="413.4043" y="82.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="416.7202" x2="416.7202" y1="82.9063" y2="514.7656"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="User" id="part1-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.7764" x="20" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.7764" x="27" y="71.6045">User Session</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="User" id="part1-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.7764" x="20" y="513.7656"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.7764" x="27" y="533.7607">User Session</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Gen" id="part2-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="161.1162" x="161.7617" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="147.1162" x="168.7617" y="71.6045">Candidate Generator</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Gen" id="part2-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="161.1162" x="161.7617" y="513.7656"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="147.1162" x="168.7617" y="533.7607">Candidate Generator</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Rank" id="part3-head"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="123.3682" x="355.7202" y="51.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109.3682" x="362.7202" y="71.6045">Ranking Engine</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Rank" id="part3-tail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="123.3682" x="355.7202" y="513.7656"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109.3682" x="362.7202" y="533.7607">Ranking Engine</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#000000" points="230.3198,110.0391,240.3198,114.0391,230.3198,118.0391,234.3198,114.0391" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="71.8882" x2="236.3198" y1="114.0391" y2="114.0391"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.8765" x="78.8882" y="108.9731">Request Next Video</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg2"><line style="stroke:#000000;stroke-width:1;" x1="242.3198" x2="284.3198" y1="169.9375" y2="169.9375"/><line style="stroke:#000000;stroke-width:1;" x1="284.3198" x2="284.3198" y1="169.9375" y2="182.9375"/><line style="stroke:#000000;stroke-width:1;" x1="243.3198" x2="284.3198" y1="182.9375" y2="182.9375"/><polygon fill="#000000" points="253.3198,178.9375,243.3198,182.9375,253.3198,186.9375,249.3198,182.9375" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.0845" x="249.3198" y="164.8716">Retrieve 100 Candidates</text></g><path d="M422.0845,127.0391 L422.0845,212.0391 L601.0845,212.0391 L601.0845,137.0391 L591.0845,127.0391 L422.0845,127.0391" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M591.0845,127.0391 L591.0845,137.0391 L601.0845,137.0391 L591.0845,127.0391" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="56.0879" x="428.0845" y="144.106">Sources:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.0825" x="428.0845" y="159.2388">1. Subscriptions</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.0562" x="428.0845" y="174.3716">2. Related to History</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.4712" x="428.0845" y="189.5044">3. Viral (General)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.8564" x="428.0845" y="204.6372">4. Exploration (Random)</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg4"><polygon fill="#000000" points="405.4043,234.8359,415.4043,238.8359,405.4043,242.8359,409.4043,238.8359" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="242.3198" x2="411.4043" y1="238.8359" y2="238.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114.061" x="249.3198" y="233.77">Score Candidates</text></g><path d="M335.7202,253.8359 L504.6265,253.8359 L504.6265,260.9688 L494.6265,270.9688 L335.7202,270.9688 L335.7202,253.8359" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="143.5313" style="stroke:#000000;stroke-width:1;" width="271.582" x="335.7202" y="253.8359"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123.9063" x="350.7202" y="266.9028">Scoring Function</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg5"><line style="stroke:#000000;stroke-width:1;" x1="417.4043" x2="459.4043" y1="292.1016" y2="292.1016"/><line style="stroke:#000000;stroke-width:1;" x1="459.4043" x2="459.4043" y1="292.1016" y2="305.1016"/><line style="stroke:#000000;stroke-width:1;" x1="418.4043" x2="459.4043" y1="305.1016" y2="305.1016"/><polygon fill="#000000" points="428.4043,301.1016,418.4043,305.1016,428.4043,309.1016,424.4043,305.1016" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.8979" x="424.4043" y="287.0356">Predict VVSA (Swipe Prob)</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg6"><line style="stroke:#000000;stroke-width:1;" x1="417.4043" x2="459.4043" y1="334.2344" y2="334.2344"/><line style="stroke:#000000;stroke-width:1;" x1="459.4043" x2="459.4043" y1="334.2344" y2="347.2344"/><line style="stroke:#000000;stroke-width:1;" x1="418.4043" x2="459.4043" y1="347.2344" y2="347.2344"/><polygon fill="#000000" points="428.4043,343.2344,418.4043,347.2344,428.4043,351.2344,424.4043,347.2344" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.4316" x="424.4043" y="329.1685">Check Creator Trust</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg7"><line style="stroke:#000000;stroke-width:1;" x1="417.4043" x2="459.4043" y1="376.3672" y2="376.3672"/><line style="stroke:#000000;stroke-width:1;" x1="459.4043" x2="459.4043" y1="376.3672" y2="389.3672"/><line style="stroke:#000000;stroke-width:1;" x1="418.4043" x2="459.4043" y1="389.3672" y2="389.3672"/><polygon fill="#000000" points="428.4043,385.3672,418.4043,389.3672,428.4043,393.3672,424.4043,389.3672" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.9414" x="424.4043" y="371.3013">Apply Diversity Filter</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg8"><polygon fill="#000000" points="82.8882,421.5,72.8882,425.5,82.8882,429.5,78.8882,425.5" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="76.8882" x2="416.4043" y1="425.5" y2="425.5"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.4741" x="88.8882" y="420.4341">Return Top 1 Video</text></g><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg9"><line style="stroke:#000000;stroke-width:1;" x1="71.8882" x2="113.8882" y1="454.6328" y2="454.6328"/><line style="stroke:#000000;stroke-width:1;" x1="113.8882" x2="113.8882" y1="454.6328" y2="467.6328"/><line style="stroke:#000000;stroke-width:1;" x1="72.8882" x2="113.8882" y1="467.6328" y2="467.6328"/><polygon fill="#000000" points="82.8882,463.6328,72.8882,467.6328,82.8882,471.6328,78.8882,467.6328" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.4316" x="78.8882" y="449.5669">Behavior (Watch/Swipe)</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg10"><polygon fill="#000000" points="405.4043,492.7656,415.4043,496.7656,405.4043,500.7656,409.4043,496.7656" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="71.8882" x2="411.4043" y1="496.7656" y2="496.7656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.375" x="78.8882" y="491.6997">Return Reward Signal</text></g><?plantuml-src RL4zKnin4EtrApPKTX63arGkCaCCJefCXlWCQTp8qixT3cAbh2I3_trMPqDW1dLQlTNx-b06V418mHARGYKWR0Q45QA7tnKhmi_OauD9Xm5TeSXm8t5dTnIe7AR692k572NB1SvkCmfqcBFYpi1cQ8EtaALbJzuMXE_8ABP46P5wUmjSMxudxk6QUs8SCMrap4ZoyMlRMC0Q_rRC1NxXKu4xyXYDpbyz5o7S8ymlBk25EXkEAa2e7ye2kbZ5OLx0bkSpwEekEw7KhEOjVvhf7q5tF9G8FoYhtiEMFy-KJ6o0oT55c6xvomokdrA8wgd5D56rFZveH2T1JRsokIZuMaeliQPntDokAeyf6z3JDlvltWXwSkhohhlKFXufuTZ5z1tiSa1t3ql1bYzifERo3keofN20AzgZP6qJLXIAzeNiZNb6jhJ77AimR6A2-IdcvngEW6yus3qfr-IFBMuu7-LDNq17ljClQtoqug6Zdctu1m00?></g></svg>